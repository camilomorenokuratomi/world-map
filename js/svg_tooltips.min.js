/*! svg_tooltips - v0.1.0 - 2013-10-02
* https://github.com/motherjones/svg_tooltips
* Copyright (c) 2013 Mother Jones Data Desk; Licensed MIT */
"use strict";(function(t){t.tooltip_svg=function(o,s,e){var i=jQuery('<div class="svg_tooltip" style="display: none; position: absolute;"><p>text</p></div>');t("body").prepend(i);var n="tooltip"+Math.random(),a=dust.compile(o,n),l=t("#"+e.container);console.log(e),console.log(l),dust.loadSource(a),Tabletop.init({key:s,callback:function(t){r(t)},simpleSheet:!0});var c=[],r=function(o){for(var s=0;o.length>s;s++){var e=o[s];if(e.id){var a=document.getElementById(e.id);if(a){a.setAttribute("class",a.getAttribute("class")+" has_tooltip");var r=jQuery("#"+e.id);c.push(r),dust.render(n,e,function(t,o){r.attr("data-tooltip",o)}),r.bind("mouseout",function(){i.css("display","none")}),r.bind("mousemove",function(o){var s=i.outerWidth(),e=o.pageX+10;o.pageX+s>l.outerWidth()+l.offset().left&&(e=o.pageX-s-10),i.css("left",e).css("top",o.pageY+10).css("display","block").html(t(this).attr("data-tooltip"))}),r.click(function(t){for(var o=0;c.length>o;o++){var s=c[o];s.unbind("mouseout"),s.unbind("mousemove")}return i.css("left",t.pageX+10).css("top",t.pageY+10).css("display","block").html(jQuery(this).attr("data-tooltip")),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!1})}}}t(document).click(function(){for(var o=0;c.length>o;o++){var s=c[o];s.bind("mousemove",function(o){i.css("left",o.pageX+10).css("top",o.pageY+10).css("display","block").html(t(this).attr("data-tooltip"))}),s.bind("mouseout",function(){i.css("display","none")}),i.css("display","none")}})};return{container:l,shapes:c,tooltip:i}},t.fn.tooltip_svg=function(o,s,e){return e=e||{},e.container=this.attr("id"),this.tooltip_svg=t.tooltip_svg(o,s,e),this}})(jQuery);